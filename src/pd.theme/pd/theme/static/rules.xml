<?xml version="1.0" encoding="UTF-8"?>
<rules
    xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <!-- The default theme, used for standard Plone web pages -->
    <theme href="home.html" css:if-content=".section-front-page-1" />
    <theme href="index.html" css:if-content="#visual-portal-wrapper" />
    <notheme if-path="@@manage-viewlets" />

    <!-- Rules applying to a standard Plone web page -->
    <rules css:if-content="#visual-portal-wrapper">

        <!-- Copy over the id/class attributes on the body tag.
             This is important for per-section styling -->
        <merge attributes="class" css:content="body" css:theme="body" />
        <copy attributes="id dir" css:content="body" css:theme="body" />

        <!-- Copy the plone base element -->
        <prepend content="/html/head/base" theme='/html/head' />

        <!-- copy all meta tags -->
        <prepend content='/html/head/meta' theme='/html/head' />

        <!-- drop the silly sunburst viewport declaration -->
        <drop content="meta[@name='viewport']" />

        <replace css:theme="title"
            css:content="title" />


        <!-- SITE SEARCH     -->
        <replace css:theme="#portal-searchbox"
            css:content="#portal-searchbox" />


        <!-- TOP NAVIGATION -->
        <replace css:theme="#top-nav-off-canvas"
            css:content="#pd-portal-globalnav" />
        <replace css:theme-children="#top-nav"
            css:content="#pd-portal-globalnav" />


        <!-- VIEWLETS CONTAINING PANELS -->
        <replace css:theme="#viewlet-above-content-body"
            css:content="#viewlet-above-content-body" />
        <replace css:theme="#viewlet-below-content-body"
            css:content="#viewlet-below-content-body" />


        <!-- INTERIOR PAGES -->
        <replace css:theme-children="#content-core"
            css:content-children="#content-core" />


        <!-- LANDING PAGE BANNER AND DESCRIPTION -->
        <!-- <rules css:if-not-content=".portaltype-landingpage, .portaltype-document">
            <drop css:theme="#top-banner" />
            <drop css:theme="#description-callout" />
        </rules>

        <rules css:if-content=".portaltype-landingpage, .portaltype-document">
            <replace css:theme="#top-banner h1"
                css:content=".documentFirstHeading" method="raw"/>
            <replace css:theme="#description-callout p"
                css:content="#content > .documentDescription" method="raw" />
            <drop css:content=".documentFirstHeading" />
            <drop css:content=".documentDescription" />
            <drop css:theme=".top-space" />
        </rules> -->

        <!-- BANNER AND CALLOUT DESCRIPTION -->
        <replace css:theme="#top-banner"
            css:content="#top-banner" />
        <replace css:theme="#description-callout"
            css:content="#description-callout" />


        <!-- HEADING AND DESCRIPTION -->
        <replace css:theme="#documentFirstHeading"
            css:content="#content > .documentFirstHeading" />
        <replace css:theme="#documentDescription"
            css:content="#content > .documentDescription" />


        <!-- DROP HEADING, DESCRIPTION AND SIDE NAVIGATION COLUMN ON PAGES WITH A BANNER -->
        <rules css:if-content="#top-banner">
            <drop css:content="#content > .documentFirstHeading" />
            <drop css:content="#content > .documentDescription" />
            <drop css:theme="#with-nav" />
        </rules>


        <!-- HAVE SIDE NAVIGATION COLUMN ON PAGES WITHOUT A BANNER, IF ON A FOLDER -->
        <rules css:if-not-content="#top-banner">
            <rules css:if-content=".portletNavigationTree">
                <drop css:theme="#without-nav" />
            </rules>
            <rules css:if-not-content=".portletNavigationTree">
                <drop css:theme="#with-nav" />
            </rules>
        </rules>


        <!-- Drop right-hand column if no side nav -->
        <!-- <rules css:if-not-content=".portletNavigationTree">
            <drop css:theme="#with-nav" />
        </rules>
        <rules css:if-content=".portletNavigationTree">
            <drop css:theme="#without-nav" />
        </rules> -->


        <!-- SIDE NAV -->
        <replace css:theme-children="#side-nav"
            css:content-children=".portletNavigationTree" />


        <!-- FEATURE CAROUSEL - CONTAINS SUB-NAVIGATION     -->
        <replace css:theme="#feature-carousel"
            css:content="#feature-carousel" />


        <!-- FROM ORIGINAL - DROP DOCUMENT ACTIONS -->
        <drop css:content=".documentActions" />


        <!-- REFERENCE -->
        <!--
        <replace css:theme=".replace-people-nav"
            css:content-children="#intranet_inner" />

        <replace css:theme=".replace-site-search"
            css:content="#portal-searchbox form" />

        <replace css:theme-children=".diazo-left-column"
                 css:content-children="#portal-column-one" />

        <append css:theme="main"
                 css:content="#portal-column-content" />

        <rules css:if-not-content=".template-compose">
            <drop css:content=".hero" />
            <replace css:theme="#hero-placeholder"
                css:content=".hero"
                method="raw"/>
        </rules>
        <rules css:if-not-content=".hero">
            <drop css:theme="#hero-placeholder" />
        </rules>

        <replace css:theme-children="aside"
                 css:content-children="#portal-column-two" />

        <replace css:theme-children="footer .footer-social"
                 css:content-children="#social-media-icons" />
        -->
    </rules>
</rules>
